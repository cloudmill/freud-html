(()=>{"use strict";var e,t={252:(e,t,a)=>{function o(e){e.querySelectorAll("input").forEach((function(e){e.setAttribute("tabindex","0")})),e.querySelectorAll("button").forEach((function(e){e.setAttribute("tabindex","0")})),e.querySelectorAll("a").forEach((function(e){e.setAttribute("tabindex","0")}))}function r(e,t,a,r,c,n,i){n&&document.querySelector(".body").classList.add("modal-open"),i&&i.classList.add("active"),t.forEach((function(e){e.classList.remove("active")})),a.forEach((function(e){e.classList.remove("active")}));var s=Number(e.getAttribute(r)),l=document.querySelector("[".concat(c,"='").concat(s,"']"));e.classList.add("active"),l.classList.add("active"),l.querySelector("[data-focus-input]")&&l.querySelector("[data-focus-input]").focus(),o(l)}function c(e,t,a,o){a&&document.querySelector(".body").classList.remove("modal-open"),o&&o.classList.remove("active"),e.forEach((function(e){e.classList.remove("active")})),t.forEach((function(e){e.classList.remove("active")})),t.forEach((function(e){e.querySelectorAll("input").forEach((function(e){e.setAttribute("tabindex","-1")})),e.querySelectorAll("button").forEach((function(e){e.setAttribute("tabindex","-1")})),e.querySelectorAll("a").forEach((function(e){e.setAttribute("tabindex","-1")}))}))}var n=1280,i=768,s=window.matchMedia("(min-width: ".concat(n,"px)"));window.matchMedia("(min-width: ".concat(i,"px)"));function l(e){setTimeout((function(){(!Boolean(e.closest("form"))||e.closest("form")&&!e.closest("form").querySelector(".form-error.active"))&&(document.querySelector("[data-cart-body-stages]").classList.add("hide"),document.querySelector("[data-cart-body-result]").classList.remove("hide"),e.hasAttribute("type","submit")?(document.querySelector("[data-result-adsress]").innerText="".concat(document.querySelector("[data-dostavka-address]").value," ").concat(document.querySelector("[data-dostavka-address2]").value),document.querySelector("[data-result-samovyvos]").style.display="none"):document.querySelector("[data-result-dostavka]").style.display="none",setTimeout((function(){document.querySelector("html").scrollIntoView({behavior:"smooth"})})))}))}const d=function(){document.querySelector("[data-cart-stage-general]")&&(s.matches&&document.querySelectorAll("[data-cart-content]").forEach((function(e){var t=String(e.offsetHeight);e.style.height=t+"px"})),document.querySelector("[data-cart-big-form]").addEventListener("click",(function(e){e.target.closest(".cart-receiving").classList.add("height-auto")})),document.querySelector("[data-cart-small-form]").addEventListener("click",(function(e){e.target.closest(".cart-receiving").classList.remove("height-auto")})),document.querySelectorAll("[data-cart-next]").forEach((function(e){e.addEventListener("click",(function(t){setTimeout((function(){if(!Boolean(e.closest("form"))||e.closest("form")&&!e.closest("form").querySelector(".form-error.active")){t.target.closest("[data-cart-stage]").classList.remove("open"),t.target.closest("[data-cart-stage]").classList.remove("add-transition"),t.target.closest("[data-cart-stage]").classList.add("previous");var a=e.getAttribute("data-cart-next");document.querySelector("[data-cart-stage='".concat(a,"']")).classList.remove("previous"),document.querySelector("[data-cart-stage='".concat(a,"']")).classList.remove("collapsed"),document.querySelector("[data-cart-stage='".concat(a,"']")).classList.add("open"),2==a&&(document.querySelector("[data-name-result]").innerText="".concat(document.querySelector("[data-cart-name]").value," ").concat(document.querySelector("[data-cart-name2]").value),document.querySelector("[data-tel-result]").innerText=document.querySelector("[data-cart-tel]").value,document.querySelector("[data-mail-result]").innerText=document.querySelector("[data-cart-mail]").value,document.querySelector("[data-note-result]").innerText=document.querySelector("[data-cart-comment]").value),setTimeout((function(){document.querySelector("[data-next-target='".concat(a,"']")).scrollIntoView({behavior:"smooth"})})),s.matches||t.target.closest("[data-cart-stage]").scrollIntoView({block:"start"})}}))}))})),document.querySelectorAll("[data-stage-edit]").forEach((function(e){e.addEventListener("click",(function(e){document.querySelectorAll("[data-cart-stage]").forEach((function(e){e.classList.remove("open"),e.classList.remove("add-transition"),e.classList.contains("previous")||e.classList.add("collapsed")})),e.target.closest("[data-cart-stage]").classList.remove("collapsed"),e.target.closest("[data-cart-stage]").classList.remove("previous"),e.target.closest("[data-cart-stage]").classList.add("open"),e.target.closest("[data-cart-stage]").classList.add("add-transition")}))})),document.querySelectorAll("[data-cart-final]").forEach((function(e){e.addEventListener("click",(function(){l(e)}))})))};function u(e){e.querySelector("input").value="",e.classList.remove("delete-active")}var m=a(638);m((function(){window.backend={templPath:m("[data-type=templ-path]").val()},m(document).on("submit","[data-type=js-form]",(function(e){console.log("form submit"),e.preventDefault();var t=m(this),a=t.attr("data-url"),o=0,r=!!t.find("[data-type=get-field-file]").length&&t.find("[data-type=get-field-file]"),c=!r&&"application/x-www-form-urlencoded; charset=UTF-8",n=!r,i=r?new FormData:{};r&&(m.each(r.files,(function(e,t){i.append("file[]",t)})),i.append("file",r[0].files[0])),t.find("[data-type=get-field]").each((function(){var e=m(this).attr("data-uf"),t=m(this).val();r?i.append(e,t):i[e]=t})),t.find("[data-type=get-field-multi]").each((function(){var e=m(this).attr("data-uf");i[e]=[]})),t.find("[data-type=get-field-multi]").each((function(){if(m(this).is(":checked")){var e=m(this).attr("data-uf"),t=m(this).attr("text");i[e][o]=t,o++}})),t.find("[data-type=get-field-radio]").each((function(){if(m(this).is(":checked")){var e=m(this).attr("data-uf"),t=m(this).attr("data-value");i[e]=t}})),m.ajax({type:"POST",url:a,dataType:"json",contentType:c,processData:n,data:i,success:function(e){console.log(e)}})})),m(document).ready((function(){var e=m(document).find("[data-type=snippet-img-hide]");m(document).find("[data-type=snippet-img-show]").html(e)})),m(document).on("click","[data-type=cookie]",(function(e){console.log("cookie"),e.preventDefault();var t="/local/templates/main/include/ajax/cookie.php",a=m(this).attr("data-name"),o={};o.name=a,m.ajax({type:"POST",url:t,data:o,success:function(e){console.log(e)}})})),m(document).on("click","[data-type=manuf-modal]",(function(e){console.log("manuf modal"),e.preventDefault();var t=m(this).attr("data-text-more"),a=m(this).html();m(document).find("[data-type=modal-manuf-name]").html(a),m(document).find("[data-type=modal-manuf-text]").html(t)})),m(document).on("click","[data-type=favor-add]",(function(e){console.log("favorite add"),e.preventDefault();var t="/local/templates/main/include/ajax/favor.php",a=m(this).attr("data-id"),o={};o.id=a,m.ajax({type:"POST",url:t,data:o,success:function(e){console.log(e.count),m(document).find("[data-type=count-favor-header]").empty(),m(document).find("[data-type=count-favor-header]").html(e.count),m.ajax({type:"POST",url:window.location.pathname,dataType:"html",data:{favorajax:!0},success:function(e){m(document).find("[data-type=favor-header]").empty(),m(document).find("[data-type=favor-header]").html(e)}}),m.ajax({type:"POST",url:window.location.pathname,dataType:"html",data:{favorajaxlist:!0},success:function(e){m(document).find("[data-type=favor-list]").empty(),m(document).find("[data-type=favor-list]").html(e)}})}})})),m(document).on("click","[data-type=basket]",(function(){var e=m(this),t=e.data("event"),a=e.data("additional"),o={id:e.attr("data-id")};a&&(o=Object.assign(a,o)),m.ajax({type:"POST",url:"".concat(window.backend.templPath,"/include/ajax/basket/").concat(t,".php"),dataType:"json",data:o,success:function(a){if(a.success)try{window.basketEventSuccess[t](e,a)}catch(e){console.log(e.message)}else alert(a.message)}})})),m(document).on("click","[data-type=transfer-data]",(function(){var e=m(this),t=e.data("transfer"),a=m(e.data("success"));m.each(t,(function(e,t){a.attr(e,t)}))})),m(document).on("click","[data-type=order]",(function(){var e=m(this),t=e.parents("[data-container=order]"),a={};t.find("[data-type=get-field]").each((function(){var e=m(this).text();e&&(a[m(this).data("field")]=e)})),t.find("[data-type=get-field-container].active").find("[data-type=get-field-select], input:checked").each((function(){var e=m(this).val(),t=m(this).data("value");(t||e)&&(a[m(this).data("field")]=e||t)})),m.ajax({type:"POST",url:"".concat(window.backend.templPath,"/include/ajax/order/add.php"),dataType:"json",data:a,success:function(t){t.success?(m("[data-type=order-result-id]").text(t.data.ID),l(e[0])):alert(t.message)}})})),m(document).on("click","[data-type=show_more_click]",(function(e){var t=m(this),a=t.attr("data-url");a&&(t.remove(),m.ajax({method:"POST",url:a,data:{ajax:1}}).done((function(e){var t=m(document).find("[data-container=items]");console.log(t),console.log(m(e)),t.append(m(e))})))})),function(){var e=m(document).find("#booking-form");if(e){var t=e.find("[data-uf=UF_SEC]").val(),a=e.find("[data-uf=UF_PLACE]").attr("placeholder");console.log(t),console.log(a)}}(),m(document).on("change","[data-type=promo-add]",(function(){m.ajax({type:"POST",url:"".concat(window.backend.templPath,"/include/ajax/promo/add.php"),dataType:"json",data:{code:m(this).val()},success:function(e){e.success?m(".cart-promocode-error").removeClass("active"):m(".cart-promocode-error").addClass("active")}})})),m(document).on("click","[data-type=promo-delete]",(function(){var e=m(this).parents("[data-container=promo-code]");m.ajax({type:"POST",url:"".concat(window.backend.templPath,"/include/ajax/promo/delete.php"),dataType:"json",data:{code:e.find("[data-type=promo-add]").val()},success:function(t){t.success?(u(e[0]),m(".cart-promocode-error").removeClass("active")):alert(t.message)}})}))})),window.basketEventSuccess={delete:function(e){c(document.querySelectorAll("[data-popup-button]"),document.querySelectorAll("[data-popup]"),!0,document.querySelector(".modals-container"));var t=m("[data-item-id=".concat(e.attr("data-id"),"]")),a=m("[data-type=basket-count]"),o=m("[data-type=basket-price-total]");m("[data-reload]").length&&1===t.filter("[data-type=item-modal]").parent().find("[data-type=item-modal]").length?document.location.href=window.location.href:t.remove(),a.text(+a.text()-1),o.text(+o.text()-+t[0].querySelector("[data-type=price]").textContent*+t[0].querySelector("[data-type=count]").textContent)},add:function(e,t){var a=m(".not-empty");a.hasClass("active")||a.addClass("active");var o=e.parents("[data-type=item]"),r=e.data("id"),c=m("[data-container=header-basket]"),n=c.find("[data-product-id=".concat(r,"]")),i=a.find("[data-type=basket-price-total]");if(n.length){var s=n.find("[data-type=count]");s.text(+s[0].textContent+1)}else{var l=c.find("template").clone().contents(),d=m("[data-type=basket-count]");l.filter("[data-item-id]").attr("data-item-id",t.data.ID),l.filter("[data-product-id]").attr("data-product-id",r),l.find("[data-id]").attr("data-id",t.data.ID),l.find("img").attr("src",o.find("img").attr("src")),o.find("[data-field]").each((function(){l.find("[data-field=".concat(m(this).data("field"),"]")).text(m(this).text())})),c.append(l),d.text(+d.text()+1)}i.text(+i.text()+ +o.find("[data-type=price]").text())}};var f=a(566),v=a.n(f);const p=function(){var e=document.querySelector("[data-time-input]");e&&(e.setAttribute("placeholder","Введите время"),e.addEventListener("focusin",(function(){e.setAttribute("placeholder","__:__")})),Maska.create(e,{tokens:{h:{pattern:/[1-2]/},H:{pattern:/[0-9]/},m:{pattern:/[0-5]/},M:{pattern:/[0-9]/}}}))};var y=a(820),g=a(656);const h=function(){Object.assign(y.Z.locales,g.Z);var e=document.querySelector("[data-datepicker]"),t=document.querySelector("[data-time-input]");if(e){var a=new Date,o=a.toLocaleDateString("en-GB").replace(/\D/g,"/"),r="31/12/"+String(a.getFullYear()+1),c={0:"voskr",1:"pnd",2:"vtor",3:"sreda",4:"chet",5:"pyat",6:"sub"};new y.Z(e,{format:"dd/mm/yyyy",autohide:!0,language:"ru",orientation:"top",maxView:2,minDate:o,maxDate:r,prevArrow:'<svg class="datepicker-arrow" width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M6 11L1 6L6 1" stroke="#1B1B1B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n      </svg>',nextArrow:'<svg class="datepicker-arrow next" width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M6 11L1 6L6 1" stroke="#1B1B1B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n      </svg>'});e.addEventListener("changeDate",(function(e){var a=e.detail.date.getDay(),o=c[a];t.setAttribute("data-weekday","".concat(o))})),s.matches||document.querySelector("[data-datepicker]").addEventListener("click",(function(){setTimeout((function(){document.querySelector("[data-datepicker]").scrollIntoView({behavior:"smooth",block:"end"})}))}))}};function b(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return S(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,n=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){i=!0,c=e},f:function(){try{n||null==a.return||a.return()}finally{if(i)throw c}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}const q=function(){var e,t=document.querySelectorAll('input[type="tel"]'),a=function(e){return e.value.replace(/\D/g,"")},o=function(e){var t=e.target,o=a(t),r=e.clipboardData||window.clipboardData;if(r){var c=r.getData("Text");if(/\D/g.test(c))return void(t.value=o)}},r=function(e){var t=e.target,o=a(t),r=t.selectionStart,c="";if(!o)return t.value="";if(t.value.length==r){if(["7","8","9"].indexOf(o[0])>-1){"9"==o[0]&&(o="7"+o);var n="8"==o[0]?"8":"+7";c=t.value=n+" ",o.length>1&&(c+="("+o.substring(1,4)),o.length>=5&&(c+=") "+o.substring(4,7)),o.length>=8&&(c+="-"+o.substring(7,9)),o.length>=10&&(c+="-"+o.substring(9,11))}else c="+"+o.substring(0,16);if(/^\+0+/g.test(c)){var i=c.replace(/^\+0+/g,"");i.length>0?t.value="+".concat(i):t.value=""}else t.value=c.replace(/^\+0+/g,"")}else e.data&&/\D/g.test(e.data)&&(t.value=o)},c=function(e){var t=e.target.value.replace(/\D/g,"");8==e.keyCode&&1==t.length&&(e.target.value="")},n=b(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;i.addEventListener("keydown",c),i.addEventListener("input",r,!1),i.addEventListener("paste",o,!1)}}catch(e){n.e(e)}finally{n.f()}};const L=function(){var e=document.querySelectorAll("[data-select-context]"),t=document.querySelector("[data-time-input]"),a={Ресторан:"rest","Сигарный лаунж":"lounge","Кабинет Фрейда":"cabinet"};e.length&&e.forEach((function(e){e.addEventListener("click",(function(e){var o=e.target.closest("[data-select-context]"),r=e.target.closest("[data-select-input]"),c=e.target.closest("[data-select]"),n=e.target.closest("[data-select-option]"),i=o.querySelector(".select-label.active")&&e.target.closest("[data-select-context]")&&!e.target.closest("[data-select]");r?function(e){var t=document.querySelectorAll("[data-select-label]"),a=e.closest("[data-select-label]");a.classList.contains("active")?a.classList.remove("active"):(t.forEach((function(e){e.classList.remove("active")})),a.classList.add("active"))}(r):c?n&&function(e){var o=e.closest(".select-label.active"),r=o.querySelector("input"),c=e.getAttribute("data-select-option");r.value=c,t.setAttribute("data-place","".concat(a[c])),o.classList.remove("active")}(n):i&&o.querySelector(".select-label.active").classList.remove("active")}))}))};const w=function(){var e=document.querySelectorAll("form");e&&e.forEach((function(e){e.querySelectorAll("input").forEach((function(t){var a;function o(){t.validity.valueMissing?"name"==t.getAttribute("data-input-title")?a.textContent="— заполните поле «Имя»":"sec-name"==t.getAttribute("data-input-title")?a.textContent="— заполните поле «Фамилия»":"address"==t.getAttribute("data-input-title")?a.textContent="— заполните поле «Адрес»":"tel"!=t.getAttribute("type")||t.closest(".booking-popup-form")?"email"==t.getAttribute("type")?a.textContent="— заполните поле «E-mail»":"checkbox"!=t.getAttribute("type")||t.checked?a.textContent="Обязательное поле":a.textContent="— вы не можете продолжить без согласия с политикой конфиденциальности":a.textContent="— заполните поле «Телефон»":t.validity.typeMismatch?"email"==t.getAttribute("type")?a.textContent="— e-mail должен содержать символы «@», «.» проверьте правильность ввода":a.textContent="Введено некорректно":t.hasAttribute("data-readonly")&&!t.value.length&&(a.textContent="Обязательное поле"),a.className="form-error active"}t.hasAttribute("data-input-novalidate")||("checkbox"==t.getAttribute("type")?(t.closest(".checkbox").insertAdjacentHTML("beforeend","<span class='form-error'></>"),a=t.closest(".checkbox").querySelector(".form-error")):t.closest("[data-select-input]")?(t.closest(".select-label").insertAdjacentHTML("beforeend","<span class='form-error'></>"),a=t.closest(".select-label").querySelector(".form-error")):t.hasAttribute("data-datepicker")?(t.closest(".form__label").insertAdjacentHTML("beforeend","<span class='form-error'></>"),a=t.closest(".form__label").querySelector(".form-error")):(t.insertAdjacentHTML("afterend","<span class='form-error'></>"),a=t.nextElementSibling),t.addEventListener("focusout",(function(e){t.validity.valid||t.hasAttribute("data-readonly")&&!t.value.length?(a.textContent="",a.className="form-error"):o()}))),e.addEventListener("submit",(function(e){!t.validity.valid||"checkbox"==t.getAttribute("type")&&!t.checked||t.hasAttribute("data-readonly")&&!t.value.length||t.closest("form").querySelector(".form-error.active")?(o(),e.preventDefault(),console.log("form-error")):(e.preventDefault(),console.log("form-success"),t.closest(".subscription-form")?(document.querySelector(".body").classList.add("modal-open"),document.querySelector(".modals-container").classList.add("active"),document.querySelector('[data-popup="11"]').classList.add("active")):t.closest(".product-body-consult")?(document.querySelector(".body").classList.add("modal-open"),document.querySelector(".modals-container").classList.add("active"),document.querySelector('[data-popup="13"]').classList.add("active")):t.closest("#certificates-form")?document.querySelector('[data-popup="13"]').classList.add("active"):t.closest("#booking-form")&&document.querySelector('[data-popup="16"]').classList.add("active"))}))}))}))};var A=a(6);function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const E=function(){new A.ZP("#restaurant-slider",{modules:[A.W_,A.tl],loop:!0,navigation:{nextEl:"#restaurant-slider-next",prevEl:"#restaurant-slider-prev"},pagination:{el:"#restaurant-slider-pagination"}}),new A.ZP("#reviews-slider",{modules:[A.W_,A.tl],slidesPerView:1.1,spaceBetween:15,breakpoints:(e={},x(e,768,{slidesPerView:"auto"}),x(e,1280,{spaceBetween:30,slidesPerView:"auto"}),e),navigation:{nextEl:"#reviews-slider-next",prevEl:"#reviews-slider-prev"},pagination:{el:"#reviews-slider-pagination"}}),new A.ZP("#shop-slider",{modules:[A.W_],slidesPerView:"auto",spaceBetween:15,breakpoints:x({},1280,{spaceBetween:30}),navigation:{nextEl:"#shop-slider-next",prevEl:"#shop-slider-prev"}}),new A.ZP("#articles-slider",{modules:[A.W_],slidesPerView:"auto",spaceBetween:30,navigation:{nextEl:"#articles-slider-next",prevEl:"#articles-slider-prev"}}),new A.ZP("#categories-slider",{modules:[A.W_],slidesPerView:"auto",spaceBetween:20,loop:!0,breakpoints:x({},1280,{slidesPerView:3,spaceBetween:30}),navigation:{nextEl:"#categories-slider-next",prevEl:"#categories-slider-prev"}}),new A.ZP("#humidor-slider",{modules:[A.Gk],slidesPerView:"auto",spaceBetween:15,centeredSlides:!0,initialSlide:1,mousewheel:{releaseOnEdges:!0,eventsTarget:".humidor-slider-overlay"},breakpoints:(t={},x(t,768,{centeredSlides:!1}),x(t,1280,{spaceBetween:30,initialSlide:0,centeredSlides:!1}),t)});var e,t,a=new A.ZP("#gallery-slider",{modules:[A.Gk,A.W_],slidesPerView:"auto",mousewheel:!0,slideToClickedSlide:!0,breakpoints:x({},1280,{direction:"vertical"}),navigation:{nextEl:"#gallery-slider-next",prevEl:"#gallery-slider-prev"}});new A.ZP("#product-slider",{modules:[A.o3],thumbs:{swiper:a}})};const k=function(){var e=document.querySelector(".humidor-slider2-section");if(s.matches&&e){var t=e.querySelector(".humidor-slider2-slider"),a=document.querySelector(".humidor-slider2-container");a.style.top="".concat(document.documentElement.clientHeight/2-a.offsetHeight/2,"px"),addEventListener("scroll",(function(){var a=Math.min(Math.max(0,-(e.getBoundingClientRect().top-innerHeight/4))/(e.getBoundingClientRect().height-innerHeight/4*3),1);t.style.transform="translateX(-".concat((t.getBoundingClientRect().width-innerWidth)*a,"px)")}))}};var _=a(386);const T=function(){var e=document.querySelectorAll(".js-badger-accordion");Array.from(e).forEach((function(e){new _.Z(e)}))};const j=function(){var e=document.querySelector("[data-tabs]"),t=document.querySelector("[data-tabs-content]");if(e&&t){var a=t.querySelectorAll("[data-content-item]");e.querySelectorAll("[data-tabs-item]").forEach((function(o,r){o.addEventListener("click",(function(){e.querySelector(".active").classList.remove("active"),o.classList.add("active"),t.querySelector(".active").classList.remove("active"),a[r].classList.add("active")}))}))}else e&&e.querySelectorAll("[data-tabs-item]").forEach((function(t,a){t.addEventListener("click",(function(){e.querySelector(".active").classList.remove("active"),t.classList.add("active")}))}))};const C=function(e,t,a){var o=document.querySelector(".modals-container"),n=document.querySelectorAll("[".concat(t,"]")),i=document.querySelectorAll("[".concat(a,"]"));if(n&&i){var s=e.target.closest("[".concat(t,"]")),l=o.classList.contains("active")&&!e.target.closest("[".concat(a,"]"))&&!e.target.closest("[".concat(t,"]"))&&!e.target.closest(".datepicker-view")||e.target.closest("[data-modal-close]");s?r(s,n,i,t,a,true,o):l&&c(n,i,true,o)}};const P=function(e,t,a,n){var i=document.querySelectorAll("[".concat(t,"]")),s=document.querySelectorAll("[".concat(a,"]")),l=!1;if(i&&s){var d,u=e.target.closest("[".concat(t,"]"));if("mouseover"==e.type&&u){n&&document.querySelector(".body").classList.add("modal-open");var m=Number(u.getAttribute(t)),f=document.querySelector("[".concat(a,"='").concat(m,"']"));i.forEach((function(e){e.getAttribute(t)!==m&&e.classList.remove("active")})),s.forEach((function(e){e.classList.contains("header-modals__item")?e!==f&&(e.style.zIndex="4",setTimeout((function(){e.classList.remove("active"),e.style.zIndex=""}),300)):e.classList.remove("active")})),u.classList.add("active"),f.classList.add("active"),f.querySelector("[data-focus-input]")&&f.querySelector("[data-focus-input]").focus(),o(f),document.querySelector(".header__top").addEventListener("mouseover",(function(e){e.relatedTarget==document.querySelector(".header__bottom")&&c(i,s,n,l)})),document.querySelector("[data-drop-close]").addEventListener("mouseover",(function(e){c(i,s,n,l)})),document.addEventListener("click",(function(e){(d=document.querySelector(".active[".concat(a,"]"))&&!e.target.closest("[".concat(t,"]"))&&!e.target.closest("[".concat(a,"]")))&&c(i,s,n,l)}))}else"click"==e.type&&(d=document.querySelector(".active[".concat(a,"]"))&&!u&&!e.target.closest("[".concat(a,"]")),u&&!u.classList.contains("active")?r(u,i,s,t,a,n,l):(u&&u.classList.contains("active")||d)&&c(i,s,n,l))}};const M=function(e){var t=document.querySelector(".first-screen");t&&"DOMContentLoaded"==e.type&&!s.matches?(setTimeout((function(){document.querySelectorAll("[data-video-show]").forEach((function(e){e.classList.add("loaded")})),document.querySelectorAll("[data-fade-up]").forEach((function(e){e.classList.add("loaded")})),document.querySelector(".first-screen__ttl").classList.add("loaded")}),1e3),setTimeout((function(){document.querySelector(".first-screen__ttl").classList.add("blend-mode")}),1200)):t&&"load"==e.type&&s.matches&&(document.querySelectorAll("[data-video-show]").forEach((function(e){e.classList.add("loaded")})),document.querySelectorAll("[data-fade-up]").forEach((function(e){e.classList.add("loaded")})),document.querySelector(".first-screen__ttl").classList.add("loaded"),document.querySelector(".first-screen__ttl").classList.add("blend-mode")),t&&"load"==e.type&&setTimeout((function(){document.querySelectorAll(".section-bg-vid__video").forEach((function(e){e.play()}))}),1e3)};var O=a(344),D=a.n(O);const H=function(){var e=document.querySelectorAll("#range-slider");e.length&&e.forEach((function(e){var t=Number(e.getAttribute("data-range-min")),a=Number(e.getAttribute("data-range-max")),o=e.closest("#range-slider-container"),r=o.querySelector("#range-from"),c=o.querySelector("#range-to");D().create(e,{start:[t,a],connect:!0,range:{min:t,max:a}}),e.noUiSlider.on("update",(function(e,t){var a=e[t];t?c.value=Math.round(a):r.value=Math.round(a)})),r.addEventListener("change",(function(){e.noUiSlider.set([this.value,null])})),c.addEventListener("change",(function(){e.noUiSlider.set([null,this.value])}))}))};const B=function(e){setTimeout((function(){document.querySelector(".header").classList.add("loaded"),document.querySelector(".filter-drops-container")&&document.querySelector(".filter-drops-container").classList.add("loaded")}),1200),"true"==document.querySelector(".body").getAttribute("data-js")&&v().init({once:!0,offset:0,duration:1200})};const F=function(){s.matches||(document.querySelector("[data-menu-btn]").addEventListener("click",(function(){document.querySelector("[data-mobile-menu]").classList.toggle("active"),document.querySelector("[data-menu-btn]").classList.toggle("active"),document.querySelector(".mobile-menu-item.active")&&document.querySelector(".mobile-menu-item.active").classList.remove("active")})),document.querySelectorAll("[data-menu-link]").forEach((function(e){e.addEventListener("click",(function(t){var a=e.getAttribute("data-menu-link");document.querySelector("[data-menu-item='".concat(a,"'")).classList.add("active")}))})),document.querySelectorAll("[data-menu-close]").forEach((function(e){e.addEventListener("click",(function(e){e.target.closest(".mobile-menu-item.active").classList.remove("active")}))})))};const I=function(e){e.target.closest(".mobile-nav__item")&&e.target.closest(".mobile-nav__item").hasAttribute("data-popup-button")?(e.target.closest(".mobile-nav__item").classList.add("active"),e.target.closest(".mobile-nav").classList.add("index-raise"),e.target.closest(".mobile-nav__item").removeAttribute("data-popup-button"),e.target.closest(".mobile-nav__item").setAttribute("data-modal-close","data-modal-close")):e.target.closest(".mobile-nav__item")&&e.target.closest(".mobile-nav__item").hasAttribute("data-modal-close")&&(e.target.closest(".mobile-nav__item").removeAttribute("data-modal-close"),e.target.closest(".mobile-nav__item").setAttribute("data-popup-button","14"),e.target.closest(".mobile-nav__item").classList.remove("active"),setTimeout((function(){e.target.closest(".mobile-nav").classList.remove("index-raise")}),300))};document.addEventListener("DOMContentLoaded",(function(e){var t,a,o;document.querySelector(".body").setAttribute("data-js","true"),M(e),F(),E(),(t=document.querySelectorAll(".header__buttons-icon")).length&&t.forEach((function(e){e.classList.contains("count")?e.hasAttribute("data-fav-btn")?e.setAttribute("data-header-btn","5"):e.hasAttribute("data-cart-btn")&&e.setAttribute("data-header-btn","6"):e.hasAttribute("data-fav-btn")?e.setAttribute("data-header-btn","3"):e.hasAttribute("data-cart-btn")&&e.setAttribute("data-header-btn","4")})),function(){if(document.querySelector("#map"))try{ymaps.ready((function(){var e=new ymaps.Map("map",{center:[59.934277,30.309636],zoom:14},{searchControlProvider:"yandex#search"}),t=(ymaps.templateLayoutFactory.createClass('<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>'),new ymaps.Placemark([59.934277,30.309636],{},{iconLayout:"default#image",iconImageHref:"/local/templates/main/assets/images/placemark.png",iconImageSize:[45.71,64],iconImageOffset:[-22,-64]}));e.geoObjects.add(t)}))}catch(e){console.error(e)}if(document.querySelector("#map2"))try{ymaps.ready((function(){var e=new ymaps.Map("map2",{center:[59.934277,30.309636],zoom:14},{searchControlProvider:"yandex#search"}),t=(ymaps.templateLayoutFactory.createClass('<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>'),new ymaps.Placemark([59.934277,30.309636],{},{iconLayout:"default#image",iconImageHref:"/local/templates/main/assets/images/placemark.png",iconImageSize:[45.71,64],iconImageOffset:[-22,-64]}));e.geoObjects.add(t)}))}catch(e){console.error(e)}}(),j(),h(),p(),q(),L(),w(),H(),document.querySelector(".sorting-filter")&&document.querySelector(".sorting-filter").addEventListener("change",(function(e){document.querySelector("[data-sort-filter]").innerHTML=e.target.closest(".sorting-filter__label").querySelector(".sorting-filter__txt").innerHTML})),(a=document.querySelector("[data-active-filters]"))&&a.querySelectorAll(".active-filter").length&&window.addEventListener("scroll",(function(){var e=document.querySelector(".active-filters-row"),t=document.querySelector(".header__bottom").offsetHeight;a.getBoundingClientRect().top-20-t<=0?e.classList.add("active"):e.classList.remove("active")})),document.querySelectorAll("[data-number-goods]").forEach((function(e){e.addEventListener("click",(function(t){var a=Number(e.querySelector("[data-number-goods-count]").innerHTML);t.target.closest("[data-number-goods-minus]")&&a>0?(2==a&&e.querySelector("[data-number-goods-minus]").classList.add("hide"),e.querySelector("[data-number-goods-count]").innerHTML=a-1):t.target.closest("[data-number-goods-plus]")&&(1==a&&e.querySelector("[data-number-goods-minus]").classList.remove("hide"),e.querySelector("[data-number-goods-count]").innerHTML=a+1)}))})),function(){var e=document.querySelectorAll("[data-header-modal]"),t=document.querySelectorAll("[data-filter-drop]"),a=document.querySelectorAll("[data-popup]");e.forEach((function(e){e.querySelectorAll("a").forEach((function(e){e.setAttribute("tabindex","-1")})),e.querySelectorAll("input").forEach((function(e){e.setAttribute("tabindex","-1")})),e.querySelectorAll("button").forEach((function(e){e.setAttribute("tabindex","-1")}))})),t.forEach((function(e){e.querySelectorAll("a").forEach((function(e){e.setAttribute("tabindex","-1")})),e.querySelectorAll("input").forEach((function(e){e.setAttribute("tabindex","-1")})),e.querySelectorAll("button").forEach((function(e){e.setAttribute("tabindex","-1")}))})),a.forEach((function(e){e.querySelectorAll("input").forEach((function(e){e.setAttribute("tabindex","-1")})),e.querySelectorAll("a").forEach((function(e){e.setAttribute("tabindex","-1")})),e.querySelectorAll("button").forEach((function(e){e.setAttribute("tabindex","-1")}))}))}(),document.addEventListener("keydown",(function(e){"Escape"==e.code&&(document.querySelector(".modals-container.active")||document.querySelector(".active[data-popup]")?(document.querySelector(".body.modal-open").classList.remove("modal-open"),document.querySelector(".modals-container.active").classList.remove("active"),document.querySelectorAll(".active[data-popup]").forEach((function(e){e.classList.remove("active")}))):document.querySelector(".active[data-filter-drop]")?document.querySelector(".active[data-filter-drop]").classList.remove("active"):document.querySelector(".active[data-header-modal]")&&(document.querySelector(".active[data-header-modal]").classList.remove("active"),document.querySelector(".body.modal-open").classList.remove("modal-open")))})),document.querySelector("[data-show-height]")&&document.querySelector("[data-show-diameter]")&&(document.querySelector("[data-show-height]").innerHTML=document.querySelector(".product-top-img__cigar-size").getAttribute("data-cigar-height"),document.querySelector("[data-show-diameter]").innerHTML=document.querySelector(".product-top-img__cigar-size").getAttribute("data-cigar-diameter")),(o=document.querySelectorAll(".cart-promocode")).length&&o.forEach((function(e){var t=e.querySelector(".cart-promocode__input"),a=e.querySelector("[data-event=promo-delete]");t.addEventListener("focusin",(function(t){e.classList.add("active")})),t.addEventListener("input",(function(){t.value.length?(e.classList.add("send-active"),e.classList.remove("delete-active")):e.classList.remove("send-active")})),a&&a.addEventListener("click",(function(t){u(e)})),t.addEventListener("focusout",(function(a){e.classList.remove("active"),e.classList.remove("send-active"),t.value&&e.classList.add("delete-active")}))})),document.addEventListener("click",(function(e){C(e,"data-popup-button","data-popup"),P(e,"data-filter-btn","data-filter-drop"),function(e){e.target.closest(".catalog-card__fav")?e.target.closest(".catalog-card__fav").classList.toggle("active"):e.target.closest(".product-button-fav")&&e.target.closest(".product-button-fav").classList.toggle("active")}(e),function(e){e.target.closest(".catalog-card__btn")&&!e.target.closest(".catalog-card--small")&&(e.target.closest(".catalog-card.in-cart")?(e.target.closest(".catalog-card").classList.remove("in-cart"),s.matches?e.target.closest(".catalog-card__btn").innerHTML="Добавить в корзину":e.target.closest(".catalog-card__btn").innerHTML="В корзину"):(e.target.closest(".catalog-card").classList.add("in-cart"),e.target.closest(".catalog-card__btn").innerHTML="В корзине",document.querySelector(".body").classList.add("modal-open"),document.querySelector(".modals-container").classList.add("active"),document.querySelector('[data-popup="5"]').classList.add("active")))}(e),function(e){var t=e.target.closest("[data-filter-drop]"),a=e.target.closest(".filters-popup"),o=e.target.closest(".category-filter-btn"),r=document.querySelector("[data-mob-filters]");if((t||a)&&o&&s.matches)o.classList.toggle("active");else if(a&&o&&!s.matches)if(e.target.closest("[data-mob-filters]"))e.target.closest("[data-mob-filters]")&&(o.remove(),document.querySelector(".filters-popup").querySelectorAll(".category-filter-btn.active").forEach((function(e){e.textContent==o.textContent&&e.classList.remove("active")})),r.innerHTML||r.classList.remove("active"));else if(o.classList.contains("active"))o.classList.remove("active"),document.querySelector("[data-mob-filters]").querySelectorAll(".category-filter-btn.active-filter").forEach((function(e){e.textContent==o.textContent&&e.remove()})),r.innerHTML||r.classList.remove("active");else{o.classList.add("active"),r.classList.add("active");var c=o.innerHTML;r.insertAdjacentHTML("beforeend",'<button class="category-filter-btn button--clean active-filter">'.concat(c,"</button>"))}e.target.closest(".drinks-filters-item")&&e.target.closest(".drinks-filters-item").classList.toggle("active")}(e),function(e){if(e.target.closest("[data-anchor-btn]")){e.preventDefault(),document.querySelectorAll("[data-anchor-target]").forEach((function(e){e.insertAdjacentHTML("afterbegin",'<div class="anchor"></div>')}));var t=e.target.closest("[data-anchor-btn]").getAttribute("data-anchor-btn");document.querySelector("[data-anchor-target='".concat(t,"']")).querySelector(".anchor").scrollIntoView({behavior:"smooth",block:"start"})}}(e),function(e){if(e.target.closest("a")&&!e.target.closest("a").hasAttribute("data-nolink")){e.preventDefault();var t=e.target.closest("a").getAttribute("href");document.querySelector(".modals-container").classList.add("fade"),setTimeout((function(){window.location.assign(t)}),600)}}(e),I(e),e.target.closest("[data-cookie-close]")&&document.querySelector(".cookie.active").classList.remove("active"),e.target.closest("[data-plug-close]")&&(document.querySelector(".plug-popup.active").classList.remove("active"),document.querySelector(".modals-container.plug").classList.remove("plug"))})),s.matches&&document.querySelector(".header__bottom-inner").addEventListener("mouseover",(function(e){P(e,"data-header-btn","data-header-modal",!0)}))})),window.addEventListener("load",(function(e){document.querySelector("body").classList.remove("no-transition"),M(e),d(),k(),B(),function(){var e=document.querySelector(".header"),t=window.pageYOffset;if(e&&(s.matches||document.querySelector("[data-category-page]"))){var a=function(){var a=window.pageYOffset;Math.abs(t-a)>=1&&(a>t?e.classList.add("header--short"):e.classList.remove("header--short")),t<1&&e.classList.remove("header--short"),t=a};window.addEventListener("scroll",(function e(){a(),setTimeout((function(){a(),window.addEventListener("scroll",e,{once:!0})}),1e3/120)}),{once:!0})}}(),T()})),window.addEventListener("scroll",(function e(){var t=setTimeout((function(){clearTimeout(t),v().refresh(),window.addEventListener("scroll",e)}),1e3);window.removeEventListener("scroll",e)}))}},a={};function o(e){var r=a[e];if(void 0!==r)return r.exports;var c=a[e]={exports:{}};return t[e].call(c.exports,c,c.exports,o),c.exports}o.m=t,e=[],o.O=(t,a,r,c)=>{if(!a){var n=1/0;for(d=0;d<e.length;d++){for(var[a,r,c]=e[d],i=!0,s=0;s<a.length;s++)(!1&c||n>=c)&&Object.keys(o.O).every((e=>o.O[e](a[s])))?a.splice(s--,1):(i=!1,c<n&&(n=c));if(i){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}c=c||0;for(var d=e.length;d>0&&e[d-1][2]>c;d--)e[d]=e[d-1];e[d]=[a,r,c]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={143:0};o.O.j=t=>0===e[t];var t=(t,a)=>{var r,c,[n,i,s]=a,l=0;if(n.some((t=>0!==e[t]))){for(r in i)o.o(i,r)&&(o.m[r]=i[r]);if(s)var d=s(o)}for(t&&t(a);l<n.length;l++)c=n[l],o.o(e,c)&&e[c]&&e[c][0](),e[n[l]]=0;return o.O(d)},a=self.webpackChunk=self.webpackChunk||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var r=o.O(void 0,[829],(()=>o(252)));r=o.O(r)})();