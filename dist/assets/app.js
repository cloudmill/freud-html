(()=>{"use strict";var t,e={895:(t,e,a)=>{function n(t){t.querySelectorAll("input").forEach((function(t){t.setAttribute("tabindex","0")})),t.querySelectorAll("button").forEach((function(t){t.setAttribute("tabindex","0")})),t.querySelectorAll("a").forEach((function(t){t.setAttribute("tabindex","0")}))}function o(t,e,a,o,r,c,i){c&&document.querySelector(".body").classList.add("modal-open"),i&&i.classList.add("active"),e.forEach((function(t){t.classList.remove("active")})),a.forEach((function(t){t.classList.remove("active")}));var s=Number(t.getAttribute(o)),d=document.querySelector("[".concat(r,"='").concat(s,"']"));t.classList.add("active"),d.classList.add("active"),d.querySelector("[data-focus-input]")&&d.querySelector("[data-focus-input]").focus(),n(d)}function r(t,e,a,n){a&&document.querySelector(".body").classList.remove("modal-open"),n&&n.classList.remove("active"),t.forEach((function(t){t.classList.remove("active")})),e.forEach((function(t){t.classList.remove("active")})),e.forEach((function(t){t.querySelectorAll("input").forEach((function(t){t.setAttribute("tabindex","-1")})),t.querySelectorAll("button").forEach((function(t){t.setAttribute("tabindex","-1")})),t.querySelectorAll("a").forEach((function(t){t.setAttribute("tabindex","-1")}))}))}var c=1280,i=768,s=window.matchMedia("(min-width: ".concat(c,"px)"));window.matchMedia("(min-width: ".concat(i,"px)"));function d(t){setTimeout((function(){(!Boolean(t.closest("form"))||t.closest("form")&&!t.closest("form").querySelector(".form-error.active"))&&(document.querySelector("[data-cart-body-stages]").classList.add("hide"),document.querySelector("[data-cart-body-result]").classList.remove("hide"),t.hasAttribute("type","submit")?(document.querySelector("[data-result-adsress]").innerText="".concat(document.querySelector("[data-dostavka-address]").value," ").concat(document.querySelector("[data-dostavka-address2]").value),document.querySelector("[data-result-samovyvos]").style.display="none"):document.querySelector("[data-result-dostavka]").style.display="none",setTimeout((function(){document.querySelector("html").scrollIntoView({behavior:"smooth"})})))}))}const l=function(){document.querySelector("[data-cart-stage-general]")&&(document.querySelector("[data-cart-big-form]")&&(document.querySelector("[data-cart-big-form]").addEventListener("click",(function(t){t.target.closest(".cart-receiving").classList.add("height-auto")})),document.querySelector("[data-cart-small-form]").addEventListener("click",(function(t){t.target.closest(".cart-receiving").classList.remove("height-auto")}))),document.querySelectorAll("[data-cart-next]").forEach((function(t){t.addEventListener("click",(function(e){setTimeout((function(){if(!Boolean(t.closest("form"))||t.closest("form")&&!t.closest("form").querySelector(".form-error.active")){var a=t.getAttribute("data-cart-next");if(s.matches){var n=document.querySelector("[data-cart-content='".concat(a,"']")),o=String(t.stageContent);n.style.height=o+"px"}e.target.closest("[data-cart-stage]").classList.remove("open"),e.target.closest("[data-cart-stage]").classList.remove("add-transition"),e.target.closest("[data-cart-stage]").classList.add("previous"),document.querySelector("[data-cart-stage='".concat(a,"']")).classList.remove("previous"),document.querySelector("[data-cart-stage='".concat(a,"']")).classList.remove("collapsed"),document.querySelector("[data-cart-stage='".concat(a,"']")).classList.add("open"),2==a&&(document.querySelector("[data-name-result]").innerText="".concat(document.querySelector("[data-cart-name]").value," ").concat(document.querySelector("[data-cart-name2]").value),document.querySelector("[data-tel-result]").innerText=document.querySelector("[data-cart-tel]").value,document.querySelector("[data-mail-result]").innerText=document.querySelector("[data-cart-mail]").value,document.querySelector("[data-note-result]").innerText=document.querySelector("[data-cart-comment]").value),setTimeout((function(){document.querySelector("[data-next-target='".concat(a,"']")).scrollIntoView({behavior:"smooth"})})),s.matches||e.target.closest("[data-cart-stage]").scrollIntoView({block:"start"})}}),110)}))})),document.querySelectorAll("[data-stage-edit]").forEach((function(t){t.addEventListener("click",(function(t){document.querySelectorAll("[data-cart-stage]").forEach((function(t){t.classList.remove("open"),t.classList.remove("add-transition"),t.classList.contains("previous")||t.classList.add("collapsed")})),t.target.closest("[data-cart-stage]").classList.remove("collapsed"),t.target.closest("[data-cart-stage]").classList.remove("previous"),t.target.closest("[data-cart-stage]").classList.add("open"),t.target.closest("[data-cart-stage]").classList.add("add-transition")}))})),document.querySelectorAll("[data-cart-final]").forEach((function(t){t.addEventListener("click",(function(){d(t)}))})))};function u(){document.querySelector(".body").classList.add("modal-open"),document.querySelector(".modals-container").classList.add("active"),document.querySelector('[data-popup="5"]').classList.add("active")}function f(t){t.querySelector("input").value="",t.classList.remove("delete-active")}var m=a(344),p=a.n(m),v=a(638);function y(t,e,a){v.ajax({type:"GET",url:window.location.href,dataType:"html",data:window.ajaxRequest.params?Object.assign(window.ajaxRequest.params,window.filters):window.filters,success:function(n){window.ajaxRequest.params=window.filters;var o=v(e),r=v(n);o.empty(),o.append(r.find(e).children());try{window.filterSuccess[a](t,r)}catch(t){console.log(t.message)}}})}function h(){v.ajax({type:"GET",url:window.location.href,dataType:"html",data:{ajax:"promo"},success:function(t){v("[data-type=replace]").each((function(){v(this).empty(),v(this).append(v(t).find("[data-replace=".concat(v(this).data("replace"),"]")).children())}))}})}v((function(){window.backend={templPath:v("[data-type=templ-path]").val()},v(document).on("submit","[data-type=js-form]",(function(t){console.log("form submit"),t.preventDefault();var e=v(this),a=e.attr("data-url"),n=0,o=!!e.find("[data-type=get-field-file]").length&&e.find("[data-type=get-field-file]"),r=!o&&"application/x-www-form-urlencoded; charset=UTF-8",c=!o,i=o?new FormData:{};o&&(v.each(o.files,(function(t,e){i.append("file[]",e)})),i.append("file",o[0].files[0])),e.find("[data-type=get-field]").each((function(){var t=v(this).attr("data-uf"),e=v(this).val();o?i.append(t,e):i[t]=e})),e.find("[data-type=get-field-multi]").each((function(){var t=v(this).attr("data-uf");i[t]=[]})),e.find("[data-type=get-field-multi]").each((function(){if(v(this).is(":checked")){var t=v(this).attr("data-uf"),e=v(this).attr("text");i[t][n]=e,n++}})),e.find("[data-type=get-field-radio]").each((function(){if(v(this).is(":checked")){var t=v(this).attr("data-uf"),e=v(this).attr("data-value");i[t]=e}})),v.ajax({type:"POST",url:a,dataType:"json",contentType:r,processData:c,data:i,success:function(t){if(console.log(t),t.response){var e=v(document).find("[data-type=response-text]");e.empty(),e.html(t.response)}}})})),v(document).on("click","[data-type=cookie]",(function(t){console.log("cookie"),t.preventDefault();var e="/local/templates/main/include/ajax/cookie.php",a=v(this).attr("data-name"),n={};n.name=a,v.ajax({type:"POST",url:e,data:n,success:function(t){console.log(t)}})})),v(document).on("click","[data-type=manuf-modal]",(function(t){console.log("manuf modal"),t.preventDefault();var e=v(this).attr("data-text-more"),a=v(this).html();v(document).find("[data-type=modal-manuf-name]").html(a),v(document).find("[data-type=modal-manuf-text]").html(e)})),v(document).on("click","[data-type=favor-add]",(function(t){console.log("favorite add"),t.preventDefault();var e=v(this),a="/local/templates/main/include/ajax/favor.php",n=e.attr("data-id"),o=e.attr("data-header-click"),r={};console.log(o),"remove"==o&&v(document).find("[data-type=favor-add]").each((function(){var t=v(this).attr("data-id");v(this).attr("data-header-click")||t==n&&v(this).removeClass("active")})),r.id=n,v.ajax({type:"POST",dataType:"json",url:a,data:r,success:function(t){console.log(t),console.log(t.count),v(document).find("[data-type=count-favor-header]").empty(),v(document).find("[data-type=count-favor-header]").text(t.count),v.ajax({type:"POST",url:window.location.pathname,dataType:"html",data:{favorajax:!0},success:function(t){v(document).find("[data-type=favor-header]").empty(),v(document).find("[data-type=favor-header]").html(t)}}),v.ajax({type:"POST",url:window.location.pathname,dataType:"html",data:{favorajaxlist:!0},success:function(t){v(document).find("[data-type=favor-list]").empty(),v(document).find("[data-type=favor-list]").html(t)}})}})})),v(document).on("click","[data-type=basket]",(function(){var t=v(this),e=t.data("event"),a=t.data("additional"),n={id:t.attr("data-id")};a&&(n=Object.assign(a,n)),v.ajax({type:"POST",url:"".concat(window.backend.templPath,"/include/ajax/basket/").concat(e,".php"),dataType:"json",data:n,success:function(a){if(a.success)try{window.basketEventSuccess[e](t,a)}catch(t){console.log(t.message)}else alert(a.message)}})})),v(document).on("click","[data-type=transfer-data]",(function(){var t=v(this),e=t.data("transfer"),a=v(t.data("success"));v.each(e,(function(t,e){a.attr(t,e)}))})),v(document).on("click","[data-type=order]",(function(){var t=v(this),e=t.parents("[data-container=order]"),a={};e.find("[data-type=get-field]").each((function(){var t=v(this).text();t&&(a[v(this).data("field")]=t)})),e.find("[data-type=get-field-container].active").find("[data-type=get-field-select], input:checked").each((function(){var t=v(this).val(),e=v(this).data("value");(e||t)&&(a[v(this).data("field")]=t||e)})),v.ajax({type:"POST",url:"".concat(window.backend.templPath,"/include/ajax/order/add.php"),dataType:"json",data:a,success:function(e){e.success?(v("[data-type=order-result-id]").text(e.data.ID),d(t[0])):alert(e.message)}})})),v(document).on("click","[data-type=pagen]",(function(){var t=v(this);v.ajax({method:"GET",url:t.data("url"),data:{ajax:"pagen"},success:function(e){var a=t.parents("[data-container=base]"),n=v(e).filter("[data-type=pagen]").length?v(e).filter("[data-type=pagen]"):v(e).find("[data-type=pagen]");a.find("[data-container=items]").append(v(e).filter("[data-container=items]").children()),a.find("[data-type=pagen]").remove(),n.length&&a.find("[data-type=pagen-append]").append(n)}})})),function(){var t=v(document).find("#booking-form");if(t){var e=t.find("[data-uf=UF_SEC]").val(),a=t.find("[data-uf=UF_PLACE]"),n=!1;t.find("[data-type=place-option]").each((function(){var t=v(this).attr("data-path"),a=v(this).attr("data-select-option");e==t&&(n=a)})),n&&(a.attr("placeholder",n),a.val(n),t.find("[data-booking=date]").removeAttr("disabled"),t.find("[data-type=par-date-div]").removeClass("disabled"))}}(),v(document).on("click","[data-booking=date]",(function(){var t=v(this).val(),e=v(this).siblings(".datepicker"),a=v(this).parents("#booking-form"),n=a.find("[data-uf=UF_PLACE]").val(),o={};e.hasClass("active")||(o.date=t,o.place=n,v.ajax({type:"POST",url:"".concat(window.backend.templPath,"/include/ajax/booking.php"),dataType:"json",data:o,success:function(t){if(console.log(t),t.success){var e=a.find("[data-uf=UF_TIME]"),n=a.find("[data-type=tooltip-date]"),o=a.find("[data-type=tooltip-date-block]");e.removeAttr("disabled"),e.removeClass("disabled"),o.removeAttr("style"),n.empty(),n.html(t.tooltip)}}}))})),v(document).on("click","[data-type=place-option]",(function(){var t=v(this).parents("#booking-form"),e=t.find("[data-uf=UF_TIME]"),a=t.find("[data-uf=UF_DATE]"),n=t.find("[data-type=par-date-div]"),o=t.find("[data-type=tooltip-date-block]");e.val(""),a.val(""),e.attr("disabled",""),o.attr("style","display:none;"),a.removeAttr("disabled"),n.removeClass("disabled")})),v(document).find("[data-time-input]").on("change",(function(){var t=v(this).val(),e=v(this).parents("#booking-form"),a=e.find("[data-uf=UF_PLACE]").val(),n=e.find("[data-uf=UF_DATE]").val(),o=v(this).siblings(".form-error"),r=e.find("[data-type=tooltip-date-block]"),c={};c.date=n,c.place=a,c.time=t,v.ajax({type:"POST",url:"".concat(window.backend.templPath,"/include/ajax/booking.php"),dataType:"json",data:c,success:function(t){t.txter&&(r.trigger("mouseenter"),r.trigger("hover"),r.trigger("mouseover"),o.addClass("active"),o.html(t.txter)),t.txter||(o.removeClass("active"),o.html())}})})),function(){var t=v(document).find("[data-input=check]");t.on("change",(function(){var e=v(this),a=e.val(),n=e.parents("[data-type=js-form]").attr("data-url"),o=t.siblings(".form-error"),r={};r.UF_EMAIL=a,r.type="check",v.ajax({type:"POST",url:n,dataType:"json",data:r,success:function(t){t.txter&&(e.val(""),o.addClass("active"),o.html(t.txter)),t.txter||(o.removeClass("active"),o.html())}})}))}(),v(document).on("change","[data-type=promo-add]",(function(){v.ajax({type:"POST",url:"".concat(window.backend.templPath,"/include/ajax/promo/add.php"),dataType:"json",data:{code:v(this).val()},success:function(t){t.success?(h(),v(".cart-promocode-error").removeClass("active")):v(".cart-promocode-error").addClass("active")}})})),v(document).on("click","[data-type=promo-delete]",(function(){var t=v(this).parents("[data-container=promo-code]");v.ajax({type:"POST",url:"".concat(window.backend.templPath,"/include/ajax/promo/delete.php"),dataType:"json",data:{code:t.find("[data-type=promo-add]").val()},success:function(e){e.success?(h(),f(t[0]),v(".cart-promocode-error").removeClass("active")):alert(e.message)}})})),document.querySelectorAll("#range-slider").forEach((function(t){t.noUiSlider.on("set",(function(t){var e=v(this.target),a=e.parents("[data-filter-key]"),n=a.data("filter-key"),o=a.parents("[data-link-container]"),r=o.data("entity"),c=o.data("link-container");document.querySelectorAll("[data-filter-key=".concat(n,"]")).forEach((function(e){e.getAttribute("data-template-type")!==a.attr("data-template-type")&&e.querySelector("#range-slider").noUiSlider.set(t,!1)})),window.filters.filter[n]=t,y(e,c,r)}))})),v(document).on("click","[data-type=filter]",(function(){var t=v(this),e=t.parents("[data-filter-key]").length?t.parents("[data-filter-key]").attr("data-filter-key"):t.attr("data-filter-key"),a=(t.parents("[data-container=filter-item]").length?t.parents("[data-container=filter-item]"):t).find("[data-type=filter-val]"),n=a.text()?a.text():a.val(),o=t.parents("[data-link-container]").attr("data-link-container"),r=t.parents("[data-entity]").data("entity"),c=v("[data-filter-key=".concat(e,"]")).find("[data-type=filter-val]:contains(".concat(n,")")).filter((function(t,e){return e.getAttribute("data-style")!==a.attr("data-style")})),i="enable";window.filters.filter[e]||(window.filters.filter[e]={}),window.filters.filter[e][n]?(delete window.filters.filter[e][n],function(t){var e=v("[data-container=filter-line]");e.find("[data-type=filter-val]:contains(".concat(t,")")).parent().remove(),e.find("[data-type=filter-val]").length||e.find("[data-type=filter-reset]").css({display:"none"})}(n),i="disable"):(window.filters.filter[e][n]=n,function(t,e){var a,n;a=v("[data-template=filter-line]"),(n=a.contents())&&a.after(n);var o=v("[data-container=filter-line]"),r=o.find("template").clone().contents(),c=o.find("[data-type=filter-reset]");r.attr("data-filter-key",t),r.find("[data-type=filter-val]").text(e),o.prepend(r),"block"!==c.css("display")&&c.css({display:"block"})}(e,n)),c.each((function(t,e){try{window.filtersEvent.styles[i][e.getAttribute("data-style")](v(e))}catch(t){console.log(t.message)}})),y(t,o,r)})),v(document).on("click","[data-type=filter-reset]",(function(){var t,e,a=v(this),n=a.parents("[data-entity]"),o=n.data("entity"),r=n.data("link-container");window.filters.filter={},t=v("[data-container=filter-line]"),e=v("[data-type=filter-val]"),t.find("[data-type=filter]").remove(),t.find("[data-type=filter-reset]").css({display:"none"}),e.each((function(t,e){var a=v(e);try{window.filtersEvent.styles.disable[a.data("style")](a)}catch(t){console.log(t.message)}})),y(a,r,o)})),v(document).on("input","[data-search]",(function(){var t=v(this),e=t.parents("[data-search-container]"),a=t.val();e.find("[data-type=filter-val]").each((function(t,e){new RegExp(a).test(e.textContent)?v(e).parents("[data-container=filter-item]").css("display","flex"):v(e).parents("[data-container=filter-item]").css("display","none")}))})),v(document).on("click","[data-show-all]",(function(){var t=v(this),e=t.parents("[data-filter-key]").attr("data-filter-key"),a=v("[data-filter-key=".concat(e,"]")).filter("[data-filter-all]"),n=t.data("show-obj"),o=v("[data-show=".concat(t.data("show-all"),"]")),r=o.find("[data-filter-key]"),c=r.attr("data-filter-key"),i=o.find("[data-container=content]"),s=i.find("template");if(c!==e){for(var d in r.attr("data-filter-key",e),n.replace)o.find("[data-replace=".concat(d,"]")).text(n.replace[d]);n.data.value.forEach((function(t){var e=s.clone().contents();e.find("[data-type=filter-val]").text(t),i.append(e)}))}i.find("[data-container=filter-item]").each((function(t,e){var n=v(e),o=n.find("input"),r=a.find("[data-container=filter-item]").eq(t);o.prop("checked",r.find("input").prop("checked")),1!==r.css("opacity")&&n.css({opacity:r.css("opacity"),"pointer-events":r.css("pointer-events")})}))})),v(document).on("click","[data-type=search]",(function(){var t=v(this),e=t.parents("[data-container=search]"),a=e.data("link-container"),n=e.data("entity");v.ajax({type:"GET",url:window.location.href,dataType:"html",data:{q:e.find("input").val(),ajax:"filter"},success:function(e){var o=v(a),r=v(e);o.empty(),o.append(r.find(a).children());try{window.filterSuccess[n](t,r)}catch(t){console.log(t.message)}}})})),v(document).on("submit","[data-type=form]",(function(){var t=v(this),e={};t.find("[data-type=get-field]").each((function(t,a){var n=v(a);e[n.data("field")]=n.val()})),v.ajax({type:"POST",url:"".concat(window.backend.templPath,"/include/ajax/form/add.php"),dataType:"json",data:e,success:function(e){if(e.success)try{window.formSuccess[t.data("event")](t)}catch(t){console.log(t.message)}else alert(e.message)}})})),v(document).on("change","[data-type=sort]",(function(){var t=v(this),e=t.parents("[data-link-container]").data("link-container"),a=v(e),n={ajax:"sort",sort:{field:t.data("field"),by:t.data("by")}};window.ajaxRequest.params&&(n=Object.assign(window.ajaxRequest.params,n)),v.ajax({type:"GET",url:window.location.href,dataType:"html",data:n,success:function(t){window.ajaxRequest.params=n,a.empty(),a.append(v(t))}})}))})),window.ajaxRequest={},window.formSuccess={consultation:function(t){}},window.filterCompare={items:function(t,e,a){var n=e.find("[data-type=filter-val]"),o=0;t.find("[data-type=filter-val]").each((function(){var t=v(this).parents("[data-container=filter-item]").length?v(this).parents("[data-container=filter-item]"):v(this).parents("[data-type=filter]"),e=n.eq(o),r=e.parents("[data-container=filter-item]").length?e.parents("[data-container=filter-item]"):e.parents("[data-type=filter]");(v(this).text()?v(this).text():v(this).val())===(e.text()?e.text():e.val())?(t.css(a.enable),t.find("[data-type=filter-count]").text(r.find("[data-type=filter-count]").text()),o++):t.css(a.disable)}))},range:function(t,e){var a=e.find("#range-slider"),n=+a.attr("data-range-min"),o=+a.attr("data-range-max");t[0].querySelector("#range-slider").noUiSlider.updateOptions({range:{min:n,max:o},start:[n,o]},!1)}},window.filterSuccess={shop:function(t,e){var a=v("[data-container=filters]"),n=e.find("[data-container=filters]"),o=v("[data-type=replace-elem]"),r={enable:{opacity:1,"pointer-events":"auto"},disable:{opacity:.3,"pointer-events":"none"}};o.each((function(t,a){var n=v(a),o=n.data("field"),r=e.find("[data-type=replace-elem][data-field=".concat(o,"]")).text();n.text(r)})),a.each((function(e,a){var o=0;v(a).find("[data-container=filter]").each((function(){if(t.parents("[data-container=filter]").data("filter-key")!==v(this).data("filter-key")){var e=n.find("[data-container=filter]").eq(o);v(this).data("filter-key")!==e.data("filter-key")?v(this).css(r.disable):(window.filterCompare[v(this).attr("data-compare")](v(this),e,r),v(this).css(r.enable),o++)}else o++}))}))}},window.filters={filter:{},ajax:"filter"},window.filtersEvent={styles:{enable:{checkbox:function(t){t.parents("[data-container=filter-item]").find("[data-type=filter]").prop("checked",!0)},button:function(t){t.parent().addClass("active")}},disable:{checkbox:function(t){t.parents("[data-container=filter-item]").find("[data-type=filter]").prop("checked",!1)},button:function(t){t.parent().removeClass("active")}}}},window.basketEventSuccess={delete:function(t){r(document.querySelectorAll("[data-popup-button]"),document.querySelectorAll("[data-popup]"),!0,document.querySelector(".modals-container"));var e=v("[data-item-id=".concat(t.attr("data-id"),"]")),a=v("[data-type=basket-count]"),n=v("[data-type=basket-price-total]"),o=v("[data-type=basket-full-price]"),c=+e[0].querySelector("[data-type=price]").textContent,i=+e[0].querySelector("[data-type=count]").textContent,s=v("[data-type=basket-items-count]"),d=v("[data-event=add][data-id=".concat(e.attr("data-product-id"),"]"));if(v("[data-reload]").length&&1===e.filter("[data-type=item-modal]").parent().find("[data-type=item-modal]").length?document.location.href=window.location.href:e.remove(),a.text(+a.text()-1),n.text(+n[0].textContent-c*i),o.length){var l=e[0].querySelector("[data-type=full-price]")?+e[0].querySelector("[data-type=full-price]").textContent:null;o.text(+o[0].textContent-(l||c)*i),v("[data-type=discount]").text(+o[0].textContent-+n[0].textContent)}s.length&&s.text(+s[0].textContent-i),d.length&&(d.parents("[data-type=item]").removeClass("in-cart"),d.attr("data-type","basket"),d.text("Добавить в корзину"))},add:function(t,e){var a,n=v(".not-empty"),o=t.parents("[data-type=item]"),r=t.data("id"),c=v("[data-container=header-basket]").find("[data-product-id=".concat(r,"]")),i=n.find("[data-type=basket-price-total]");if(c.length){var s=c.find("[data-type=count]");s.text(+s[0].textContent+1)}else{var d=v("template"),l=v("[data-type=basket-count]");o.addClass("in-cart"),o.find("[data-type=basket]").text("В корзине"),t.removeAttr("data-type"),v("[data-field-replace]").each((function(t,e){var a=v(e),n=o.find("[data-field=".concat(a.data("field-replace"),"]")),r=n.val()?n.val():n.text();a.html(r)})),v("[data-replace-img]").each((function(t,e){v(e).attr("src",o.find("[data-field-img]").attr("src"))})),u(),d.each((function(t,a){var n=v(a).clone().contents();n.filter("[data-item-id]").attr("data-item-id",e.data.ID),n.filter("[data-product-id]").attr("data-product-id",r),n.find("[data-id]").attr("data-id",e.data.ID),n.find("img").attr("src",o.find("img").attr("src")),o.find("[data-field]").each((function(){var t=v(this).val(),e=t||v(this).text();n.find("[data-field=".concat(v(this).data("field"),"]")).html(e)})),v(a).parent().append(n)})),l.text(+l.text()+1)}i.text(+i.text()+ +o.find("[data-type=price]").text()),t.data("reload")&&(a=t.parents("[data-container=items]"),v.ajax({type:"GET",url:window.location.href,dataType:"html",data:{ajax:"reload"},success:function(t){a.empty(),a.append(v(t))}}))},update:function(t){var e=v("[data-item-id=".concat(t.attr("data-id"),"]")),a=+e[0].querySelector("[data-type=price]").textContent,n=e.find("[data-type=calc-price]"),o=v("[data-type=basket-price-total]"),r=v("[data-type=basket-full-price]");if(e.find("[data-type=count]").text(t.parent().find("[data-type=count-stepper]").text()),o.text("+"===t.data("additional").operator?+o[0].textContent+a:+o[0].textContent-a),n.text("+"===t.data("additional").operator?+n[0].textContent+a:+n[0].textContent-a),r.length){var c=e[0].querySelector("[data-type=full-price]")?+e[0].querySelector("[data-type=full-price]").textContent:null;r.text("+"===t.data("additional").operator?+r[0].textContent+(c||a):+r[0].textContent-(c||a)),v("[data-type=discount]").text(+r[0].textContent-+o[0].textContent)}var i=0;t.parents("[data-type=replace]").find("[data-item-id]").each((function(){i+=+v(this).find("[data-type=count-stepper]").text()})),v("[data-type=basket-items-count]").text(i)}};var g=a(566),b=a.n(g);const S=function(){var t=document.querySelector("[data-time-input]");t&&(t.setAttribute("placeholder","Введите время"),t.addEventListener("focusin",(function(){t.setAttribute("placeholder","__:__")})),Maska.create(t,{tokens:{h:{pattern:/[1-2]/},H:{pattern:/[0-9]/},m:{pattern:/[0-5]/},M:{pattern:/[0-9]/}}}))};var w=a(820),q=a(656);const x=function(){Object.assign(w.Z.locales,q.Z);var t=document.querySelector("[data-datepicker]"),e=document.querySelector("[data-time-input]");if(t){var a=new Date,n=a.toLocaleDateString("en-GB").replace(/\D/g,"/"),o="31/12/"+String(a.getFullYear()+1),r={0:"voskr",1:"pnd",2:"vtor",3:"sreda",4:"chet",5:"pyat",6:"sub"};new w.Z(t,{format:"dd/mm/yyyy",autohide:!0,language:"ru",orientation:"top",maxView:2,minDate:n,maxDate:o,prevArrow:'<svg class="datepicker-arrow" width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M6 11L1 6L6 1" stroke="#1B1B1B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n      </svg>',nextArrow:'<svg class="datepicker-arrow next" width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M6 11L1 6L6 1" stroke="#1B1B1B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n      </svg>'});t.addEventListener("changeDate",(function(t){var a=t.detail.date.getDay(),n=r[a];e.setAttribute("data-weekday","".concat(n))})),s.matches||document.querySelector("[data-datepicker]").addEventListener("click",(function(){setTimeout((function(){document.querySelector("[data-datepicker]").scrollIntoView({behavior:"smooth",block:"end"})}))}))}};function L(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function(t,e){if(!t)return;if("string"==typeof t)return k(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return k(t,e)}(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,i=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return c=t.done,t},e:function(t){i=!0,r=t},f:function(){try{c||null==a.return||a.return()}finally{if(i)throw r}}}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}const A=function(){var t,e=document.querySelectorAll('input[type="tel"]'),a=function(t){return t.value.replace(/\D/g,"")},n=function(t){var e=t.target,n=a(e),o=t.clipboardData||window.clipboardData;if(o){var r=o.getData("Text");if(/\D/g.test(r))return void(e.value=n)}},o=function(t){var e=t.target,n=a(e),o=e.selectionStart,r="";if(!n)return e.value="";if(e.value.length==o){if(["7","8","9"].indexOf(n[0])>-1){"9"==n[0]&&(n="7"+n);var c="8"==n[0]?"8":"+7";r=e.value=c+" ",n.length>1&&(r+="("+n.substring(1,4)),n.length>=5&&(r+=") "+n.substring(4,7)),n.length>=8&&(r+="-"+n.substring(7,9)),n.length>=10&&(r+="-"+n.substring(9,11))}else r="+"+n.substring(0,16);if(/^\+0+/g.test(r)){var i=r.replace(/^\+0+/g,"");i.length>0?e.value="+".concat(i):e.value=""}else e.value=r.replace(/^\+0+/g,"")}else t.data&&/\D/g.test(t.data)&&(e.value=n)},r=function(t){var e=t.target.value.replace(/\D/g,"");8==t.keyCode&&1==e.length&&(t.target.value="")},c=L(e);try{for(c.s();!(t=c.n()).done;){var i=t.value;i.addEventListener("keydown",r),i.addEventListener("input",o,!1),i.addEventListener("paste",n,!1)}}catch(t){c.e(t)}finally{c.f()}};const E=function(){var t=document.querySelectorAll("[data-select-context]"),e=document.querySelector("[data-time-input]"),a={Ресторан:"rest","Сигарный лаунж":"lounge","Кабинет Фрейда":"cabinet"};t.length&&t.forEach((function(t){t.addEventListener("click",(function(t){var n=t.target.closest("[data-select-context]"),o=t.target.closest("[data-select-input]"),r=t.target.closest("[data-select]"),c=t.target.closest("[data-select-option]"),i=n.querySelector(".select-label.active")&&t.target.closest("[data-select-context]")&&!t.target.closest("[data-select]");o?function(t){var e=document.querySelectorAll("[data-select-label]"),a=t.closest("[data-select-label]");a.classList.contains("active")?a.classList.remove("active"):(e.forEach((function(t){t.classList.remove("active")})),a.classList.add("active"))}(o):r?c&&function(t){var n=t.closest(".select-label.active"),o=n.querySelector("input"),r=t.getAttribute("data-select-option");o.value=r,e.setAttribute("data-place","".concat(a[r])),n.classList.remove("active")}(c):i&&n.querySelector(".select-label.active").classList.remove("active")}))}))};const T=function(){var t=document.querySelectorAll("form");t.length&&t.forEach((function(t){t.hasAttribute("data-search-block")||t.querySelectorAll("input").forEach((function(e){if("hidden"!==e.getAttribute("type")&&"submit"!==e.getAttribute("type")){var a,n=function(){e.validity.valueMissing?"name"==e.getAttribute("data-input-title")?a.textContent="— заполните поле «Имя»":"sec-name"==e.getAttribute("data-input-title")?a.textContent="— заполните поле «Фамилия»":"address"==e.getAttribute("data-input-title")?a.textContent="— заполните поле «Адрес»":"tel"!=e.getAttribute("type")||e.closest(".booking-popup-form")?"email"==e.getAttribute("type")?a.textContent="— заполните поле «E-mail»":"checkbox"!=e.getAttribute("type")||e.checked?a.textContent="Обязательное поле":a.textContent="— вы не можете продолжить без согласия с политикой конфиденциальности":a.textContent="— заполните поле «Телефон»":e.validity.typeMismatch?"email"==e.getAttribute("type")?a.textContent="— e-mail должен содержать символы «@», «.» проверьте правильность ввода":a.textContent="Введено некорректно":e.hasAttribute("data-readonly")&&!e.value.length&&(a.textContent="Обязательное поле"),a.className="form-error active"};e.hasAttribute("data-input-novalidate")||("checkbox"==e.getAttribute("type")?(e.closest(".checkbox").insertAdjacentHTML("beforeend","<span class='form-error'></>"),a=e.closest(".checkbox").querySelector(".form-error")):e.closest("[data-select-input]")?(e.closest(".select-label").insertAdjacentHTML("beforeend","<span class='form-error'></>"),a=e.closest(".select-label").querySelector(".form-error")):e.hasAttribute("data-datepicker")?(e.closest(".form__label").insertAdjacentHTML("beforeend","<span class='form-error'></>"),a=e.closest(".form__label").querySelector(".form-error")):(e.insertAdjacentHTML("afterend","<span class='form-error'></>"),a=e.nextElementSibling),e.addEventListener("focusout",(function(t){e.validity.valid||e.hasAttribute("data-readonly")&&!e.value.length?(a.textContent="",a.className="form-error"):n()}))),t.addEventListener("submit",(function(t){t.preventDefault(),setTimeout((function(){!e.validity.valid||"checkbox"==e.getAttribute("type")&&!e.checked||e.hasAttribute("data-readonly")&&!e.value.length?n(e.validity.valid):(a.className="form-error",a.textContent="")})),setTimeout((function(){e.closest("form").querySelector(".form-error.active")||(e.closest(".subscription-form")?(document.querySelector(".body").classList.add("modal-open"),document.querySelector(".modals-container").classList.add("active"),document.querySelector('[data-popup="11"]').classList.add("active")):e.closest(".product-body-consult")?(document.querySelector(".body").classList.add("modal-open"),document.querySelector(".modals-container").classList.add("active"),document.querySelector('[data-popup="13"]').classList.add("active")):e.closest("#certificates-form")||e.closest("#consult-form")?document.querySelector('[data-popup="13"]').classList.add("active"):e.closest("#booking-form")&&document.querySelector('[data-popup="16"]').classList.add("active"),e.closest("[data-cart-form]")||setTimeout((function(){e.value=""}),500))}),100)}))}}))}))};var j=a(6);function C(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const _=function(){new j.ZP("#restaurant-slider",{modules:[j.W_,j.tl],loop:!0,navigation:{nextEl:"#restaurant-slider-next",prevEl:"#restaurant-slider-prev"},pagination:{el:"#restaurant-slider-pagination"}}),new j.ZP("#reviews-slider",{modules:[j.W_,j.tl],slidesPerView:1.1,spaceBetween:15,breakpoints:(t={},C(t,768,{slidesPerView:"auto"}),C(t,1280,{spaceBetween:30,slidesPerView:"auto"}),t),navigation:{nextEl:"#reviews-slider-next",prevEl:"#reviews-slider-prev"},pagination:{el:"#reviews-slider-pagination"}}),new j.ZP("#shop-slider",{modules:[j.W_],slidesPerView:"auto",spaceBetween:15,breakpoints:C({},1280,{spaceBetween:30}),navigation:{nextEl:"#shop-slider-next",prevEl:"#shop-slider-prev"}}),new j.ZP("#articles-slider",{modules:[j.W_],slidesPerView:"auto",spaceBetween:30,navigation:{nextEl:"#articles-slider-next",prevEl:"#articles-slider-prev"}}),new j.ZP("#categories-slider",{modules:[j.W_],slidesPerView:"auto",spaceBetween:20,loop:!0,breakpoints:C({},1280,{slidesPerView:3,spaceBetween:30}),navigation:{nextEl:"#categories-slider-next",prevEl:"#categories-slider-prev"}}),new j.ZP("#humidor-slider",{modules:[j.Gk],slidesPerView:"auto",spaceBetween:15,centeredSlides:!0,initialSlide:1,mousewheel:{releaseOnEdges:!0,eventsTarget:".humidor-slider-overlay"},breakpoints:(e={},C(e,768,{centeredSlides:!1}),C(e,1280,{spaceBetween:30,initialSlide:0,centeredSlides:!1}),e)});var t,e,a=new j.ZP("#gallery-slider",{modules:[j.Gk,j.W_],slidesPerView:"auto",mousewheel:!0,slideToClickedSlide:!0,breakpoints:C({},1280,{direction:"vertical"}),navigation:{nextEl:"#gallery-slider-next",prevEl:"#gallery-slider-prev"}});new j.ZP("#product-slider",{modules:[j.o3],thumbs:{swiper:a}})};const P=function(){var t=document.querySelector(".humidor-slider2-section");if(s.matches&&t){var e=t.querySelector(".humidor-slider2-slider"),a=document.querySelector(".humidor-slider2-container");a.style.top="".concat(document.documentElement.clientHeight/2-a.offsetHeight/2,"px"),addEventListener("scroll",(function(){var a=Math.min(Math.max(0,-(t.getBoundingClientRect().top-innerHeight/4))/(t.getBoundingClientRect().height-innerHeight/4*3),1);e.style.transform="translateX(-".concat((e.getBoundingClientRect().width-innerWidth)*a,"px)")}))}};var O=a(386);const M=function(){var t=document.querySelectorAll(".js-badger-accordion");Array.from(t).forEach((function(t){new O.Z(t)}))};const D=function(){var t=document.querySelector("[data-tabs]"),e=document.querySelector("[data-tabs-content]");if(t&&e){var a=e.querySelectorAll("[data-content-item]");t.querySelectorAll("[data-tabs-item]").forEach((function(n,o){n.addEventListener("click",(function(){t.querySelector(".active").classList.remove("active"),n.classList.add("active"),e.querySelector(".active").classList.remove("active"),a[o].classList.add("active")}))}))}else t&&t.querySelectorAll("[data-tabs-item]").forEach((function(e,a){e.addEventListener("click",(function(){t.querySelector(".active").classList.remove("active"),e.classList.add("active")}))}))};const B=function(t,e,a){var n=document.querySelector(".modals-container"),c=document.querySelectorAll("[".concat(e,"]")),i=document.querySelectorAll("[".concat(a,"]"));if(c&&i){var s=t.target.closest("[".concat(e,"]")),d=n.classList.contains("active")&&!t.target.closest("[".concat(a,"]"))&&!t.target.closest("[".concat(e,"]"))&&!t.target.closest(".datepicker-view")||t.target.closest("[data-modal-close]");s?o(s,c,i,e,a,true,n):d&&r(c,i,true,n)}};const H=function(t,e,a,c){var i=document.querySelectorAll("[".concat(e,"]")),s=document.querySelectorAll("[".concat(a,"]")),d=!1;if(i&&s){var l,u=t.target.closest("[".concat(e,"]"));"mouseenter"==t.type&&u?function(t,e,a,o,c,i,s,d){if(t.classList.contains("active"))r(o,c,i,s);else{i&&document.querySelector(".body").classList.add("modal-open"),s&&s.classList.add("active");var l=Number(t.getAttribute(e)),u=document.querySelector("[".concat(a,"='").concat(l,"']"));o.forEach((function(t){t.getAttribute(e)!==l&&t.classList.remove("active")})),c.forEach((function(t){t.classList.contains("header-modals__item")?t!==u&&(t.style.zIndex="4",setTimeout((function(){t.classList.remove("active"),t.style.zIndex=""}),300)):t.classList.remove("active")})),t.classList.add("active"),u.classList.add("active"),u.querySelector("[data-focus-input]")&&u.querySelector("[data-focus-input]").focus(),n(u),document.querySelector(".header__top").addEventListener("mouseover",(function(t){t.relatedTarget==document.querySelector(".header__bottom")&&r(o,c,i,s)})),document.querySelector("[data-drop-close]").addEventListener("mouseover",(function(t){r(o,c,i,s)})),document.addEventListener("mouseover",(function t(e){e.target.closest(".header")||(r(o,c,i,s),document.removeEventListener("mouseover",t))})),document.addEventListener("click",(function(t){document.querySelector(".active[".concat(a,"]"))&&!t.target.closest("[".concat(e,"]"))&&!t.target.closest("[".concat(a,"]"))&&r(o,c,i,s)}))}}(u,e,a,i,s,c,d):"click"==t.type&&(l=document.querySelector(".active[".concat(a,"]"))&&!u&&!t.target.closest("[".concat(a,"]")),u&&!u.classList.contains("active")?o(u,i,s,e,a,c,d):(u&&u.classList.contains("active")||l)&&r(i,s,c,d))}};const F=function(t){var e=document.querySelector(".first-screen");e&&"DOMContentLoaded"==t.type&&!s.matches?(setTimeout((function(){document.querySelectorAll("[data-video-show]").forEach((function(t){t.classList.add("loaded")})),document.querySelectorAll("[data-fade-up]").forEach((function(t){t.classList.add("loaded")})),document.querySelector(".first-screen__ttl").classList.add("loaded")}),1e3),setTimeout((function(){document.querySelector(".first-screen__ttl").classList.add("blend-mode")}),1200)):e&&"load"==t.type&&s.matches&&(document.querySelectorAll("[data-video-show]").forEach((function(t){t.classList.add("loaded")})),document.querySelectorAll("[data-fade-up]").forEach((function(t){t.classList.add("loaded")})),document.querySelector(".first-screen__ttl").classList.add("loaded"),document.querySelector(".first-screen__ttl").classList.add("blend-mode")),e&&"load"==t.type&&setTimeout((function(){document.querySelectorAll(".section-bg-vid__video").forEach((function(t){t.play()}))}),1e3)};const I=function(){var t=document.querySelectorAll("#range-slider");t.length&&t.forEach((function(t){var e=Number(t.getAttribute("data-range-min")),a=Number(t.getAttribute("data-range-max")),n=t.closest("#range-slider-container"),o=n.querySelector("#range-from"),r=n.querySelector("#range-to");p().create(t,{start:[e,a],connect:!0,range:{min:e,max:a}}),t.noUiSlider.on("update",(function(t,e){var a=t[e];e?r.value=Math.round(a):o.value=Math.round(a)})),o.addEventListener("change",(function(){t.noUiSlider.set([this.value,null])})),r.addEventListener("change",(function(){t.noUiSlider.set([null,this.value])}))}))};const U=function(t){setTimeout((function(){document.querySelector(".header").classList.add("loaded"),document.querySelector(".filter-drops-container")&&document.querySelector(".filter-drops-container").classList.add("loaded")}),1200),"true"==document.querySelector(".body").getAttribute("data-js")&&b().init({once:!0,offset:0,duration:1200})};const R=function(){s.matches||(document.querySelector("[data-menu-btn]").addEventListener("click",(function(){document.querySelector("[data-mobile-menu]").classList.toggle("active"),document.querySelector("[data-menu-btn]").classList.toggle("active"),document.querySelector(".mobile-menu-item.active")&&document.querySelector(".mobile-menu-item.active").classList.remove("active")})),document.querySelectorAll("[data-menu-link]").forEach((function(t){t.addEventListener("click",(function(e){var a=t.getAttribute("data-menu-link");document.querySelector("[data-menu-item='".concat(a,"'")).classList.add("active")}))})),document.querySelectorAll("[data-menu-close]").forEach((function(t){t.addEventListener("click",(function(t){t.target.closest(".mobile-menu-item.active").classList.remove("active")}))})))};const V=function(t){t.target.closest(".mobile-nav__item")&&t.target.closest(".mobile-nav__item").hasAttribute("data-popup-button")?(t.target.closest(".mobile-nav__item").classList.add("active"),t.target.closest(".mobile-nav").classList.add("index-raise"),t.target.closest(".mobile-nav__item").removeAttribute("data-popup-button"),t.target.closest(".mobile-nav__item").setAttribute("data-modal-close","data-modal-close")):t.target.closest(".mobile-nav__item")&&t.target.closest(".mobile-nav__item").hasAttribute("data-modal-close")&&(t.target.closest(".mobile-nav__item").removeAttribute("data-modal-close"),t.target.closest(".mobile-nav__item").setAttribute("data-popup-button","14"),t.target.closest(".mobile-nav__item").classList.remove("active"),setTimeout((function(){t.target.closest(".mobile-nav").classList.remove("index-raise")}),300))};document.addEventListener("DOMContentLoaded",(function(t){var e,a,n;document.querySelector(".body").setAttribute("data-js","true"),F(t),R(),_(),(e=document.querySelectorAll(".header__buttons-icon")).length&&e.forEach((function(t){t.classList.contains("count")?t.hasAttribute("data-fav-btn")?t.setAttribute("data-header-btn","5"):t.hasAttribute("data-cart-btn")&&t.setAttribute("data-header-btn","6"):t.hasAttribute("data-fav-btn")?t.setAttribute("data-header-btn","3"):t.hasAttribute("data-cart-btn")&&t.setAttribute("data-header-btn","4")})),function(){if(document.querySelector("#map"))try{ymaps.ready((function(){var t=new ymaps.Map("map",{center:[59.934277,30.309636],zoom:14},{searchControlProvider:"yandex#search"}),e=(ymaps.templateLayoutFactory.createClass('<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>'),new ymaps.Placemark([59.934277,30.309636],{},{iconLayout:"default#image",iconImageHref:"/local/templates/main/assets/images/placemark.png",iconImageSize:[45.71,64],iconImageOffset:[-22,-64]}));t.geoObjects.add(e)}))}catch(t){console.error(t)}if(document.querySelector("#map2"))try{ymaps.ready((function(){var t=new ymaps.Map("map2",{center:[59.934277,30.309636],zoom:14},{searchControlProvider:"yandex#search"}),e=(ymaps.templateLayoutFactory.createClass('<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>'),new ymaps.Placemark([59.934277,30.309636],{},{iconLayout:"default#image",iconImageHref:"/local/templates/main/assets/images/placemark.png",iconImageSize:[45.71,64],iconImageOffset:[-22,-64]}));t.geoObjects.add(e)}))}catch(t){console.error(t)}}(),D(),x(),S(),A(),E(),T(),I(),document.querySelector(".sorting-filter")&&document.querySelector(".sorting-filter").addEventListener("change",(function(t){document.querySelector("[data-sort-filter]").innerHTML=t.target.closest(".sorting-filter__label").querySelector(".sorting-filter__txt").innerHTML})),(a=document.querySelector("[data-active-filters]"))&&a.querySelectorAll(".active-filter").length&&window.addEventListener("scroll",(function(){var t=document.querySelector(".active-filters-row"),e=document.querySelector(".header__bottom").offsetHeight;a.getBoundingClientRect().top-20-e<=0?t.classList.add("active"):t.classList.remove("active")})),document.querySelectorAll("[data-number-goods]").forEach((function(t){t.addEventListener("click",(function(e){var a=Number(t.querySelector("[data-number-goods-count]").innerHTML);e.target.closest("[data-number-goods-minus]")&&a>0?(2==a&&t.querySelector("[data-number-goods-minus]").classList.add("hide"),t.querySelector("[data-number-goods-count]").innerHTML=a-1):e.target.closest("[data-number-goods-plus]")&&(1==a&&t.querySelector("[data-number-goods-minus]").classList.remove("hide"),t.querySelector("[data-number-goods-count]").innerHTML=a+1)}))})),function(){var t=document.querySelectorAll("[data-header-modal]"),e=document.querySelectorAll("[data-filter-drop]"),a=document.querySelectorAll("[data-popup]");t.forEach((function(t){t.querySelectorAll("a").forEach((function(t){t.setAttribute("tabindex","-1")})),t.querySelectorAll("input").forEach((function(t){t.setAttribute("tabindex","-1")})),t.querySelectorAll("button").forEach((function(t){t.setAttribute("tabindex","-1")}))})),e.forEach((function(t){t.querySelectorAll("a").forEach((function(t){t.setAttribute("tabindex","-1")})),t.querySelectorAll("input").forEach((function(t){t.setAttribute("tabindex","-1")})),t.querySelectorAll("button").forEach((function(t){t.setAttribute("tabindex","-1")}))})),a.forEach((function(t){t.querySelectorAll("input").forEach((function(t){t.setAttribute("tabindex","-1")})),t.querySelectorAll("a").forEach((function(t){t.setAttribute("tabindex","-1")})),t.querySelectorAll("button").forEach((function(t){t.setAttribute("tabindex","-1")}))}))}(),document.addEventListener("keydown",(function(t){"Escape"==t.code&&(document.querySelector(".modals-container.active")||document.querySelector(".active[data-popup]")?(document.querySelector(".body.modal-open").classList.remove("modal-open"),document.querySelector(".modals-container.active").classList.remove("active"),document.querySelectorAll(".active[data-popup]").forEach((function(t){t.classList.remove("active")}))):document.querySelector(".active[data-filter-drop]")?document.querySelector(".active[data-filter-drop]").classList.remove("active"):document.querySelector(".active[data-header-modal]")&&(document.querySelector(".active[data-header-modal]").classList.remove("active"),document.querySelector(".body.modal-open").classList.remove("modal-open")))})),document.querySelector("[data-show-height]")&&document.querySelector("[data-show-diameter]")&&(document.querySelector("[data-show-height]").innerHTML=document.querySelector(".product-top-img__cigar-size").getAttribute("data-cigar-height"),document.querySelector("[data-show-diameter]").innerHTML=document.querySelector(".product-top-img__cigar-size").getAttribute("data-cigar-diameter")),(n=document.querySelectorAll(".cart-promocode")).length&&n.forEach((function(t){var e=t.querySelector(".cart-promocode__input"),a=t.querySelector("[data-event=promo-delete]");e.addEventListener("focusin",(function(e){t.classList.add("active")})),e.addEventListener("input",(function(){e.value.length?(t.classList.add("send-active"),t.classList.remove("delete-active")):t.classList.remove("send-active")})),a&&a.addEventListener("click",(function(e){f(t)})),e.addEventListener("focusout",(function(a){t.classList.remove("active"),t.classList.remove("send-active"),e.value&&t.classList.add("delete-active")}))})),document.addEventListener("click",(function(t){B(t,"data-popup-button","data-popup"),H(t,"data-filter-btn","data-filter-drop"),function(t){t.target.closest(".catalog-card__fav")?t.target.closest(".catalog-card__fav").classList.toggle("active"):t.target.closest(".product-button-fav")&&t.target.closest(".product-button-fav").classList.toggle("active")}(t),function(t){t.target.closest("[data-card-btn]")&&!t.target.closest(".catalog-card--small")&&(t.target.closest("[data-card-btn-parent].in-cart")?(t.target.closest("[data-card-btn-parent]").classList.remove("in-cart"),s.matches?t.target.closest("[data-card-btn]").innerHTML="Добавить в корзину":t.target.closest("[data-card-btn]").innerHTML="В корзину"):(t.target.closest("[data-card-btn-parent]").classList.add("in-cart"),t.target.closest("[data-card-btn]").innerHTML="В корзине",u()))}(t),function(t){var e=t.target.closest("[data-filter-drop]"),a=t.target.closest(".filters-popup"),n=t.target.closest(".category-filter-btn"),o=document.querySelector("[data-mob-filters]");if((e||a)&&n&&s.matches)n.classList.toggle("active");else if(a&&n&&!s.matches)if(t.target.closest("[data-mob-filters]"))t.target.closest("[data-mob-filters]")&&(n.remove(),document.querySelector(".filters-popup").querySelectorAll(".category-filter-btn.active").forEach((function(t){t.textContent==n.textContent&&t.classList.remove("active")})),o.innerHTML||o.classList.remove("active"));else if(n.classList.contains("active"))n.classList.remove("active"),document.querySelector("[data-mob-filters]").querySelectorAll(".category-filter-btn.active-filter").forEach((function(t){t.textContent==n.textContent&&t.remove()})),o.innerHTML||o.classList.remove("active");else{n.classList.add("active"),o.classList.add("active");var r=n.innerHTML;o.insertAdjacentHTML("beforeend",'<button class="category-filter-btn button--clean active-filter">'.concat(r,"</button>"))}t.target.closest(".drinks-filters-item")&&t.target.closest(".drinks-filters-item").classList.toggle("active")}(t),function(t){if(t.target.closest("[data-anchor-btn]")){t.preventDefault(),document.querySelectorAll("[data-anchor-target]").forEach((function(t){t.insertAdjacentHTML("afterbegin",'<div class="anchor"></div>')}));var e=t.target.closest("[data-anchor-btn]").getAttribute("data-anchor-btn");document.querySelector("[data-anchor-target='".concat(e,"']")).querySelector(".anchor").scrollIntoView({behavior:"smooth",block:"start"})}}(t),function(t){if(t.target.closest("a")&&!t.target.closest("a").hasAttribute("data-nolink")){t.preventDefault();var e=t.target.closest("a").getAttribute("href");document.querySelector(".modals-container").classList.add("fade"),setTimeout((function(){window.location.assign(e)}),600)}}(t),V(t),t.target.closest("[data-cookie-close]")&&document.querySelector(".cookie.active").classList.remove("active"),t.target.closest("[data-plug-close]")&&(document.querySelector(".plug-popup.active").classList.remove("active"),document.querySelector(".modals-container.plug").classList.remove("plug"))})),s.matches&&document.querySelectorAll("[data-header-btn]").forEach((function(t){t.addEventListener("mouseenter",(function(t){H(t,"data-header-btn","data-header-modal",!0)}))}))})),window.addEventListener("load",(function(t){var e;(e=document.querySelectorAll("[data-filter-btn]")).length&&e.forEach((function(t){if("6"!=t.getAttribute("data-filter-btn")){var e=document.querySelector(".filter-drops-btns"),a=e.getBoundingClientRect().left,n=t.getAttribute("data-filter-btn"),o=document.querySelector("[data-filter-drop='".concat(n,"']")),r=t.getBoundingClientRect().left-a-10;if(o.style.left=r>0?"".concat(r,"px"):"0px",document.documentElement.clientWidth-o.getBoundingClientRect().right<a){var c=e.getBoundingClientRect().width-r;o.style.width="".concat(c,"px")}}})),document.querySelector("body").classList.remove("no-transition"),F(t),l(),P(),U(),function(){var t=document.querySelector(".header"),e=window.pageYOffset;if(t&&(s.matches||document.querySelector("[data-category-page]"))){var a=function(){var a=window.pageYOffset;Math.abs(e-a)>=1&&(a>e?t.classList.add("header--short"):t.classList.remove("header--short")),e<1&&t.classList.remove("header--short"),e=a};window.addEventListener("scroll",(function t(){a(),setTimeout((function(){a(),window.addEventListener("scroll",t,{once:!0})}),1e3/120)}),{once:!0})}}(),M()})),window.addEventListener("scroll",(function t(){var e=setTimeout((function(){clearTimeout(e),b().refresh(),window.addEventListener("scroll",t)}),1e3);window.removeEventListener("scroll",t)}))}},a={};function n(t){var o=a[t];if(void 0!==o)return o.exports;var r=a[t]={exports:{}};return e[t].call(r.exports,r,r.exports,n),r.exports}n.m=e,t=[],n.O=(e,a,o,r)=>{if(!a){var c=1/0;for(l=0;l<t.length;l++){for(var[a,o,r]=t[l],i=!0,s=0;s<a.length;s++)(!1&r||c>=r)&&Object.keys(n.O).every((t=>n.O[t](a[s])))?a.splice(s--,1):(i=!1,r<c&&(c=r));if(i){t.splice(l--,1);var d=o();void 0!==d&&(e=d)}}return e}r=r||0;for(var l=t.length;l>0&&t[l-1][2]>r;l--)t[l]=t[l-1];t[l]=[a,o,r]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={143:0};n.O.j=e=>0===t[e];var e=(e,a)=>{var o,r,[c,i,s]=a,d=0;if(c.some((e=>0!==t[e]))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(s)var l=s(n)}for(e&&e(a);d<c.length;d++)r=c[d],n.o(t,r)&&t[r]&&t[r][0](),t[c[d]]=0;return n.O(l)},a=self.webpackChunk=self.webpackChunk||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))})();var o=n.O(void 0,[829],(()=>n(895)));o=n.O(o)})();